# ä»“åº“åº“å­˜æ£€æµ‹ç³»ç»Ÿ (å¾®æœåŠ¡ç‰ˆ)

ä¸€ä¸ªåŸºäº Node.js çš„æ™ºèƒ½ä»“åº“åº“å­˜æ£€æµ‹ç³»ç»Ÿã€‚æœ¬é¡¹ç›®é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå°†æµè§ˆå™¨è‡ªåŠ¨åŒ–ä»»åŠ¡ä¸ä¸»åº”ç”¨åˆ†ç¦»ï¼Œä»¥å®ç°æ›´é«˜çš„æ€§èƒ½ã€å¯ä¼¸ç¼©æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” åº“å­˜æ£€æµ‹
- è‡ªåŠ¨åŒ–åº“å­˜æ£€æµ‹ï¼Œæ”¯æŒå¤šä¸ª SKU å’Œåœ°åŒº
- åŸºäº Playwright çš„ç½‘é¡µè‡ªåŠ¨åŒ–
- å®æ—¶ç»“æœå±•ç¤ºå’Œå†å²è®°å½•

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•ç³»ç»Ÿ
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼ˆæ™®é€šç”¨æˆ·ã€ç®¡ç†å‘˜ï¼‰
- JWT ä»¤ç‰Œè®¤è¯

### âš™ï¸ é…ç½®ç®¡ç†
- çµæ´»çš„ SKU å’Œåœ°åŒºé…ç½®
- å¯é‡ç”¨çš„æ£€æµ‹é…ç½®
- é…ç½®çš„å¢åˆ æ”¹æŸ¥

### â° å®šæ—¶ä»»åŠ¡
- åŸºäº Cron è¡¨è¾¾å¼çš„å®šæ—¶ä»»åŠ¡
- è‡ªåŠ¨æ‰§è¡Œåº“å­˜æ£€æµ‹
- ä»»åŠ¡çŠ¶æ€ç›‘æ§

### ğŸ“Š ç®¡ç†åå°
- ç›´è§‚çš„ Web ç®¡ç†ç•Œé¢
- å®æ—¶æ•°æ®ç»Ÿè®¡
- ç»“æœæŸ¥çœ‹å’Œåˆ†æ

### ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²
- ä¼˜åŒ–çš„ Dockerfileï¼Œå®ç°é•œåƒæœ€å°åŒ–
- åˆ†ç¦»çš„æœåŠ¡ï¼Œæ”¯æŒç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•

## æ¶æ„æ¦‚è§ˆ

ç³»ç»Ÿé‡‡ç”¨ä¸‰å±‚å¾®æœåŠ¡æ¶æ„ï¼š

1.  **ä¸»åº”ç”¨ (warehouse-detective)**
    -   **èŒè´£**: æä¾› Web ç•Œé¢å’Œæ ¸å¿ƒä¸šåŠ¡ APIï¼ˆç”¨æˆ·ç®¡ç†ã€é…ç½®ã€ä»»åŠ¡è°ƒåº¦ç­‰ï¼‰ã€‚
    -   **æŠ€æœ¯**: Node.js, Express, SQLiteã€‚
    -   **ç‰¹ç‚¹**: è½»é‡çº§ï¼Œä¸åŒ…å«ä»»ä½•æµè§ˆå™¨æˆ– Playwright ä¾èµ–ã€‚

2.  **Playwright æœåŠ¡ (playwright-service)**
    -   **èŒè´£**: æ¥æ”¶æ¥è‡ªä¸»åº”ç”¨çš„æŒ‡ä»¤ï¼Œæ‰§è¡Œæ‰€æœ‰ä¸æµè§ˆå™¨è‡ªåŠ¨åŒ–ç›¸å…³çš„ä»»åŠ¡ï¼ˆå¦‚ç™»å½•ç½‘ç«™ã€æœç´¢ SKUï¼‰ã€‚
    -   **æŠ€æœ¯**: Node.js, Express, Playwrightã€‚
    -   **ç‰¹ç‚¹**: å°è£…äº†æ‰€æœ‰ç¹é‡çš„æµè§ˆå™¨æ“ä½œï¼Œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ API æœåŠ¡è¿è¡Œã€‚

3.  **æµè§ˆå™¨æœåŠ¡ (browser-service)**
    -   **èŒè´£**: æä¾›ä¸€ä¸ªç¨³å®šã€å¯è¿œç¨‹è¿æ¥çš„ Chrome æµè§ˆå™¨ç¯å¢ƒã€‚
    -   **æŠ€æœ¯**: `browserless/chrome` Docker é•œåƒã€‚
    -   **ç‰¹ç‚¹**: å³å¼€å³ç”¨ï¼Œæ— éœ€æˆ‘ä»¬è‡ªå·±ç»´æŠ¤æµè§ˆå™¨å®‰è£…å’Œé…ç½®ã€‚

**è°ƒç”¨æµç¨‹**: `ç”¨æˆ· -> ä¸»åº”ç”¨ -> Playwright æœåŠ¡ -> æµè§ˆå™¨æœåŠ¡`

## éƒ¨ç½²æŒ‡å— (Docker)

æœ¬é¡¹ç›®æ¨èä½¿ç”¨ Docker è¿›è¡Œéƒ¨ç½²ã€‚æˆ‘ä»¬ä¸ä½¿ç”¨ Docker Composeï¼Œè€Œæ˜¯é€šè¿‡æ ‡å‡†çš„ Docker å‘½ä»¤è¿›è¡Œç®¡ç†ã€‚

è¯¦ç»†çš„æ„å»ºå’Œè¿è¡Œæ­¥éª¤å·²è®°å½•åœ¨ `run-docker.md` æ–‡ä»¶ä¸­ã€‚è¯·å‚è€ƒè¯¥æ–‡ä»¶æ¥å¯åŠ¨æ•´ä¸ªåº”ç”¨ã€‚

**[>> ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†éƒ¨ç½²æ­¥éª¤ (run-docker.md)](run-docker.md)**

## æœ¬åœ°å¼€å‘

1.  **å…‹éš†é¡¹ç›®**
    ```bash
    git clone https://github.com/psygithub/waredetective.git
    cd waredetective
    ```

2.  **å¯åŠ¨ä¾èµ–æœåŠ¡**
    åœ¨å¼€å‘ä¸»åº”ç”¨æˆ– Playwright æœåŠ¡ä¹‹å‰ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„æµè§ˆå™¨æœåŠ¡ã€‚
    ```bash
    docker run -d -p 3000:3000 --rm --name browser-service browserless/chrome:latest
    ```
    *æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å°†æµè§ˆå™¨æœåŠ¡çš„ 3000 ç«¯å£æ˜ å°„åˆ°äº†å®¿ä¸»æœºçš„ 3000 ç«¯å£ã€‚*

3.  **å¼€å‘ `playwright-service`**
    ```bash
    cd playwright-service
    npm install
    # è®¾ç½®ç¯å¢ƒå˜é‡ä»¥è¿æ¥åˆ°æœ¬åœ°è¿è¡Œçš„æµè§ˆå™¨æœåŠ¡
    export BROWSER_SERVICE_URL=ws://localhost:3000
    npm start
    ```
    æœåŠ¡å°†è¿è¡Œåœ¨ `http://localhost:3001`ã€‚

4.  **å¼€å‘ä¸»åº”ç”¨**
    åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­ï¼š
    ```bash
    cd main-app
    npm install
    # è®¾ç½®ç¯å¢ƒå˜é‡ä»¥è¿æ¥åˆ°æœ¬åœ°è¿è¡Œçš„ playwright-service
    export PLAYWRIGHT_SERVICE_URL=http://localhost:3001
    npm start
    ```
    ä¸»åº”ç”¨å°†è¿è¡Œåœ¨ `http://localhost:3000`ï¼ˆæˆ–å…¶ä»–é…ç½®çš„ç«¯å£ï¼‰ã€‚

## é¡¹ç›®ç»“æ„

```
waredetective/
â”œâ”€â”€ main-app/               # ä¸»åº”ç”¨æœåŠ¡
â”‚   â”œâ”€â”€ src/                # ä¸»åº”ç”¨æºä»£ç 
â”‚   â”œâ”€â”€ public/             # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile          # ä¸»åº”ç”¨çš„ Docker é…ç½®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ playwright-service/     # Playwright å¾®æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.js        # æµè§ˆå™¨è‡ªåŠ¨åŒ–æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â””â”€â”€ server.js      # Playwright æœåŠ¡çš„ Express å…¥å£
â”‚   â”œâ”€â”€ Dockerfile         # Playwright æœåŠ¡çš„ Docker é…ç½®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ config/                 # å…±äº«é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                   # æ•°æ®åº“æ–‡ä»¶ (æŒä¹…åŒ–)
â”œâ”€â”€ scripts/                # éƒ¨ç½²å’Œå¤‡ä»½è„šæœ¬
â”œâ”€â”€ run-docker.md           # Docker éƒ¨ç½²æŒ‡å—
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## é»˜è®¤è´¦æˆ·

-   **ç”¨æˆ·å**: admin
-   **å¯†ç **: admin123

## API æ¥å£

(API æ¥å£éƒ¨åˆ†ä¸æ—§ç‰ˆä¸€è‡´ï¼Œæ­¤å¤„çœç•¥ä»¥ä¿æŒç®€æ´ï¼Œå®é™…æ–‡ä»¶ä¸­ä¼šä¿ç•™)

## å¯ç”¨è„šæœ¬ (ä¸»åº”ç”¨)

-   `npm start`: å¯åŠ¨ä¸»åº”ç”¨çš„ Web æœåŠ¡å™¨ã€‚
-   `npm run dev`: åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯åŠ¨æœåŠ¡å™¨ã€‚
-   `npm test`: è¿è¡ŒåŸºç¡€æµ‹è¯•ã€‚
